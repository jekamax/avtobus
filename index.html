<!doctype html>
<html>

<head>
    <title>avtobus</title>
    <meta charset='utf-8' />
    <style type="text/css">
        #download {
            float: left;
            cursor: pointer;
            color: #c00;
        }
        #download:hover {
            color: #fff;
        }
    </style>
</head>

<body id='body'>
<script>
	function yeah()
	{	
	var where=document.getElementById('whereId').value;
	document.getElementById('body').innerHTML="<canvas width='960' height='540' id='canv'>Обнови браузер, мразь</canvas><p><a id='download'>Даунлоад имедж</a></p>"
        var canv = document.getElementById("canv");
        var ctx = canv.getContext('2d');
        ctx.fillStyle = "#6E6D69";
        var img = new Image;

        var plate = new Image;

        plate.onload = function() {
            img.onload = function() {

                ctx.drawImage(plate, 405, 315);
                ctx.strokeStyle = "#F00";
                ctx.textAlign = 'center';
                ctx.font = "bold 10pt Arial";
                ctx.fillText(where, 443, 326);
                ctx.drawImage(img, 0, 0);

                function downloadCanvas(link, canvasId, filename) {
                    link.href = document.getElementById(canvasId).toDataURL();
                    link.download = filename;
                }
                document.getElementById('download').addEventListener('click', function() {
                    downloadCanvas(this, 'canv', 'test.png');
                }, false);
                var el = document.getElementById('body');
                var disp = el.style.display;
                el.style.display = 'none';
                setTimeout(function() {
                    el.style.display = disp;

                }, 20);

            }
        }
        plate.src = "plate.jpg";
        img.src = "Avto.png";
	}
    </script>

Куда едем: <input type="text" id="whereId" name="fname" value="никуда">
<button onclick="yeah()">Try it</button>
    
    
</body>

</html>
